let e=[],n=[];const t=c("DOM_CONTENT_LOADED",(function(e,n){}));function o(e){try{if("string"===E(e.event)){const n=g(e.event,e.scope),t=c(n,e.action);window.addEventListener(n,t),i({name:e.name||null,event:n,scope:e.scope||null,handler:t})}else{if("array"!==E(e.event))throw"subscription.event must be a string or an array";e.event.forEach((n=>{const t=g(n,e.scope),o=c(t,e.action);window.addEventListener(t,o),i({name:e.name||null,event:t,scope:e.scope||null,handler:o})}))}}catch(e){console.error(e)}}function s(e={}){const n=r(),t=[];e.event&&(e.scopedEvent=g(e.event,e.scope)),n.forEach((n=>{let o=!1;o=!e||!e.event&&!e.name||(e.event&&!e.name?n.event===e.scopedEvent:e.event||!e.name||e.scope?!e.event&&e.name&&e.scope?n.name===e.name&&n.scope===e.scope:n.event===e.scopedEvent&&n.name===e.name:n.name===e.name),o?window.removeEventListener(n.event,n.handler):t.push(n)})),a(t)}function r(){try{if("array"===E(e))return[...e];throw`subscriptions is type ${E(e)}. failed to get subscriptions as it must be an array.`}catch(e){console.error(e)}}function a(n){try{if("array"!==E(n))throw`subscriptions is type ${E(e)}. failed to set subscriptions as it must be an array.`;e=n}catch(e){console.error(e)}}function i(e){const n=[...r()];n.push(e),a(n)}function c(e,n,t="global"){return o=>{p(e,o.detail?.data||null,t),n(o,o.detail.domEvent)}}function l(e,n,t="global",o=null){dispatchEvent(new CustomEvent(g(e,t),{detail:{domEvent:n,scope:t,data:o}}))}function u(e="global"){try{window.sessionStorage.getItem("lcsm")||window.sessionStorage.setItem("lcsm",JSON.stringify({[e]:{}}));return JSON.parse(window.sessionStorage.getItem("lcsm"))[e]}catch(e){console.error(`\n      window.sessionStorage.state must be valid JSON.\n      ${e}\n    `)}}function d(e,n="global"){const t={...u(),[n]:e};window.sessionStorage.setItem("lcsm",JSON.stringify(t))}function m(){window.sessionStorage.setItem("lcsm",JSON.stringify({}))}function p(e,n=null,t="global"){let o=u(t);f().forEach((s=>{o=s(e,o,t,n)})),d(o,t)}function f(){return n}function v(e){n=e}function w(e){let n=[...f()];n.push(e),v(n)}function g(e,n="global"){try{if("string"===E(n))return n.toUpperCase()+"_"+e;throw"Scope must be a string"}catch(e){console.error(e)}}function E(e){return((Object.prototype.toString.call(e).match(/^\[object\s(\S+?)\]$/)||[])[1]||"undefined").toLowerCase()}window.addEventListener("DOM_CONTENT_LOADED",t),addEventListener("DOMContentLoaded",(e=>{l("DOM_CONTENT_LOADED",e)}));export{l as publish,o as subscribe,s as unsubscribe,r as getSubscriptions,a as setSubscriptions,u as getState,d as setState,p as amendState,w as addStateModifier,f as getStateModifiers,v as setStateModifiers,m as resetAllState,g as scopeName};